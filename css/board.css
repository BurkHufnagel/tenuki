.tenuki-board {
  position: relative;
  background: rgb(226, 188, 106);
}

.tenuki-board .lines {
  position: absolute;
  top: 0;
  left: 0;
  /* base margin */
  margin: calc(28px - 10px);
}

.tenuki-board[data-include-gutter=true] .lines {
  /* base margin + additional gutter margin */
  margin: calc((28px - 10px) + (28px - 3px));
}

.tenuki-board .line {
  background: rgb(135, 113, 63);
  float: left;
  position: relative;
}

.tenuki-board .line.horizontal {
  height: 1px;
  width: 100%;
  /* intersection gap size */
  margin-bottom: 28px;
  clear: left;
}

.tenuki-board .line.vertical {
  width: 1px;
  height: 100%;
  /* intersection gap size */
  margin-right: 28px;
}

.tenuki-board .line.vertical:last-child {
  margin-right: -1px;
}

.tenuki-board[data-include-gutter=true] .line.vertical:before,
.tenuki-board[data-include-gutter=true] .line.vertical:after,
.tenuki-board[data-include-gutter=true] .line.horizontal:before,
.tenuki-board[data-include-gutter=true] .line.horizontal:after {
  /* gutter margin, less 5px */
  width: calc((28px - 3px) - 5px);
  /* gutter margin, less 5px */
  height: calc((28px - 3px) - 5px);
  text-align: center;
  /* gutter margin, less 5px */
  line-height: calc((28px - 3px) - 5px);
  font-family: sans-serif;
  color: rgb(135, 113, 63);
  display: block;
  font-size: 14px;
}

.tenuki-board[data-include-gutter=true] .line.vertical:before,
.tenuki-board[data-include-gutter=true] .line.vertical:after {
  content: attr(data-top-gutter);
}

.tenuki-board[data-include-gutter=true] .line.horizontal:before,
.tenuki-board[data-include-gutter=true] .line.horizontal:after {
  content: attr(data-left-gutter);
}

.tenuki-board[data-include-gutter=true] .line.vertical:before {
  /* -1*width/2 */
  margin-left: calc(-1*((28px - 3px) - 5px)/2);
  /* -1*width/2, less the intersection gap size */
  margin-top: calc(-1*((28px - 3px) - 5px)/2 - 28px);
}

.tenuki-board[data-include-gutter=true] .line.vertical:after {
  position: absolute;
  bottom: 0;
  left: 0;
  /* -1*width/2 */
  margin-left: calc(-1*((28px - 3px) - 5px)/2);
  /* -1*width/2, less the intersection gap size */
  margin-bottom: calc(-1*((28px - 3px) - 5px)/2 - 28px);
}

.tenuki-board[data-include-gutter=true] .line.horizontal:before {
  /* -1*width/2, less the intersection gap size */
  margin-left: calc(-1*((28px - 3px) - 5px)/2 - 28px);
  /* -1*width/2 */
  margin-top: calc(-1*((28px - 3px) - 5px)/2);
}

.tenuki-board[data-include-gutter=true] .line.horizontal:after {
  position: absolute;
  top: 0;
  right: 0;
  /* -1*width/2, less the intersection gap size */
  margin-right: calc(-1*((28px - 3px) - 5px)/2 - 28px);
  /* -1*width/2 */
  margin-top: calc(-1*((28px - 3px) - 5px)/2);
}

.tenuki-board .hoshi {
  width: calc(2 * 2px + 1px);
  height: calc(2 * 2px + 1px);
  border-radius: 50%;
  background: rgb(135, 113, 63);
  position: absolute;
}

.tenuki-board .intersections {
  position: absolute;
  /* base margin, less half the intersection gap size */
  top: calc((28px - 10px) - 28px/2);
  /* base margin, less half the intersection gap size */
  left: calc((28px - 10px) - 28px/2);
}

.tenuki-board[data-include-gutter=true] .intersections {
  /* additional gutter margin */
  margin-top: calc(28px - 3px);
  /* additional gutter margin */
  margin-left: calc(28px - 3px);
}

.tenuki-board .intersection {
  position: absolute;
}

.tenuki-board .intersection.empty {
  /* full stone width with border */
  width: calc(28px + 1px);
  height: calc(28px + 1px);
}

.tenuki-board .intersection.stone.marker:after {
  content: "";
  display: block;
  width: calc(28px/4);
  height: calc(28px/4);
  border-radius: 50%;
  border: 2px solid;
  position: absolute;
  /*
   * total occupying stone width is (28 - 1 == 27)px stone width, + 2px for the border on the stone, for 29px total.
   * the midpoint of the 29px width is then (29px + 1px)/2.
   * this brings us 1 pixel to the right of, and 1 pixel below the intersection we want.
   */
  left: calc((28px - 1px + 2px + 1px)/2);
  top: calc((28px - 1px + 2px + 1px)/2);
  /* now correct by the 1 pixel, plus half the width of the marker, accounting for 2*2px border */
  margin-left: calc(-1 * (((28px/4 + 2*2px) + 1px)/2 + 1px));
  margin-top: calc(-1 * (((28px/4 + 2*2px) + 1px)/2 + 1px));
}

.tenuki-board .intersection.white.stone.marker:after {
  color: black;
}

.tenuki-board .intersection.black.stone.marker:after {
  color: white;
}

.tenuki-board .stone {
  content: "";
  display: block;
  width: calc(28px - 1px);
  height: calc(28px - 1px);
  border-radius: 50%;
  border: 1px solid black;
}

.tenuki-board .stone.white {
  background: white;
  border-color: #676767;
}

.tenuki-board .stone.black {
  background: black;
}

.tenuki-board .intersection .highlight {
  display: block;
  width: 100%;
  height: 100%;
}

.tenuki-board .intersection.empty:hover .highlight {
  display: block;
  /* stone width without border */
  width: calc(28px - 1px);
  /* stone width without border */
  height: calc(28px - 1px);
  border-radius: 50%;
  opacity: 0.5;
}

.tenuki-board.white-to-play .intersection.empty:hover .highlight,
.tenuki-board.black-to-play .intersection.empty:hover .highlight {
  background: black;
  border: 1px solid black;
}

.tenuki-board.white-to-play .intersection.empty:hover .highlight {
  background: white;
}

.tenuki-board .intersection.ko .highlight {
  background: none !important;
  width: 11px !important;
  height: 11px !important;
  border: 1px solid black !important;
  border-radius: 0 !important;
  left: 50% !important;
  top: 50% !important;
  opacity: 1.0 !important;
  position: absolute;
  margin-top: calc(-1px - 6px);
  margin-left: calc(-1px - 6px);
}

.tenuki-board .intersection.suicide .highlight {
  background: none !important;
  border: none !important;
}

.tenuki-board .intersection.stone.black.dead,
.tenuki-board .intersection.stone.black.white {
  border-color: rgba(0, 0, 0, 0.5);
}

.tenuki-board .intersection.stone.black.dead {
  background: rgba(0, 0, 0, 0.5);
}

.tenuki-board .intersection.stone.white.dead {
  background: rgba(255, 255, 255, 0.5);
}

.tenuki-board .intersection.territory-black:after,
.tenuki-board .intersection.territory-white:after {
  content: "";
  display: block;
  width: calc(28px/4);
  height: calc(28px/4);
  border: 2px solid;
  position: absolute;
  left: 50%;
  top: 50%;
  margin-left: calc(-28px/4 + 1px);
  margin-top: calc(-28px/4 + 1px);
}

.tenuki-board .intersection.territory-black:after {
  color: black;
  background: black;
}

.tenuki-board .intersection.territory-white:after {
  color: white;
  background: white;
}

.tenuki-board-textured .stone {
  box-shadow: 0px 2px 1px rgba(62, 62, 62, 0.38);
}

.tenuki-board-textured .stone.black,
.tenuki-board-textured.black-to-play .intersection.empty:hover .highlight {
  border-color: #565656;
  background: radial-gradient(circle at 50% 120%, #000000, #484848 10%, #101010 80%, #FFFFFF 100%);
}

.tenuki-board-textured .stone.white,
.tenuki-board-textured.white-to-play .intersection.empty:hover .highlight {
  border-color: #DEDEDE;
  background: radial-gradient(circle at 50% 120%, #ECEAEA, #D6D6D6 10%, #EAEAEA 80%, #FFFFFF 100%);
}

.tenuki-board-textured .stone:before {
  content: "";
  position: absolute;
  top: 1%;
  left: 5%;
  width: 90%;
  height: 90%;
  border-radius: 50%;
  background: radial-gradient(circle at 50% 0px, #DADADA, rgba(255, 255, 255, 0) 58%);
  z-index: 2;
}

.tenuki-board-textured .stone.white:before {
  background: radial-gradient(circle at 50% 0px, #FFFFFF, rgba(255, 255, 255, 0) 58%);
}

.tenuki-board-textured .marker:after {
  opacity: 0.9;
}
